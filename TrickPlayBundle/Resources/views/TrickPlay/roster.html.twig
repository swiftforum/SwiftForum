{% extends "TalisTrickPlayBundle::base.html.twig" %}

{% block subtitle %}Roster{% endblock %}
{% block content %}
    <div class="page-header">
        <h1>TrickPlay member roster</h1>
    </div>

    <table class="table table-striped">
        <thead>
        <tr>
            <th>#</th>
            <th>Username</th>
            <th>Rank</th>
            <th>Primary Char</th>
            <th>Primary Job</th>
            <th>Secondary Job</th>
            <th>Primary Craft</th>
            <th>Secondary Craft</th>
        </tr>
        </thead>
        <tbody>
        {% for userArray in users %}
            {% for user in userArray %}
                <tr class="roster-user">
                    <td>{{ loop.parent.loop.index0 + loop.index }}</td>
                    <td>{{ user.user.username|trans|e }}</td>
                    <td>{{ user.user.role.name|e }}</td>
                    <td>{{ user.character.charname|default('')|e }}</td>
                    <td>{{ user.character.charjobprimary|default('')|e }}</td>
                    <td>{{ user.character.charjobsecondary|default('')|e }}</td>
                    <td>{{ user.character.charprofprimary|default('')|e }}</td>
                    <td>{{ user.character.charprofsecondary|default('')|e }}</td>
                </tr>
            {% endfor %}
        {% endfor %}

        </tbody>
    </table>

    <ul class="dropdown-menu" id="user-dropdown" style="position: fixed">
        <li class="dropdown">
            <a href="#" data-toggle="dropdown">Change rank <span class="right-caret"></span></a>
            <ul class="dropdown-menu" style="left: 100%; top: 0">
                <li><a href="#">Member</a></li>
                <li><a href="#">Officer</a></li>
                <li><a href="#">Master</a></li>
                <li><a href="#">Admin</a></li>
                <li><a href="#">Superadmin</a></li>
                <li><a href="#">Banned</a></li>
                <li><a href="#">Warned</a></li>
            </ul>
        </li>
        <li class="divider"></li>
        <li class="dropdown"><a href="#">Ban</a></li>
    </ul>
{% endblock %}

{% block javascripts %}
<script>
$(function() {
    $(".roster-user").click(function(e) {
        $("#user-dropdown").css("top", e.pageY).css("left", e.pageX).show();
        return false;
    });

    $(document).click(function() {
        $("#user-dropdown").hide();
    })
})
</script>
{% endblock %}
